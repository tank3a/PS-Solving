url: https://www.acmicpc.net/problem/4195

```
import java.util.*;
import java.io.*;

public class Main {
        
    static int[] parent;
    static int[] count;
    public static void main(String[] args) throws IOException {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        
        int N = Integer.parseInt(br.readLine());
        
        StringBuilder sb = new StringBuilder();
        
        
        while(N-- > 0) {
            int F = Integer.parseInt(br.readLine());
            parent = new int[F * 2];
            count = new int[F * 2];
            
            int index = 0;
            HashMap<String, Integer> map = new HashMap<>();
            for(int i = 0; i < F*2; i++) {
                parent[i] = i;
            }

            for(int i = 0; i < F; i++) {
                String[] input = br.readLine().split(" ");
                
                if(!map.containsKey(input[0])) {
                    map.put(input[0], index++);
                    count[map.get(input[0])] = 1;
                }
                int rootLeft = find(map.get(input[0]));

                if(!map.containsKey(input[1])) {
                    map.put(input[1], index++);
                    count[map.get(input[1])] = 1;
                }
                int rootRight = find(map.get(input[1]));
                
                sb.append(union(rootLeft, rootRight)).append('\n');                
            }
        }
        
        System.out.println(sb.toString().trim());
    }
    
    public static int find(int root) {
        if(root == parent[root])
            return root;
        
        return find(parent[root]);
    }
    
    public static int union(int rootLeft, int rootRight) {
        if(rootLeft == rootRight) {
            return count[rootLeft];
        }
        else {
            if(count[rootLeft] > count[rootRight]) {
                parent[rootRight] = rootLeft;
                count[rootLeft] += count[rootRight];
                return count[rootLeft];
            }
            else {
                parent[rootLeft] = rootRight;
                count[rootRight] += count[rootLeft];
                return count[rootRight];
            }
        }
    }
}
```